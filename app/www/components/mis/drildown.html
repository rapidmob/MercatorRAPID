<ion-popover-view class="drillpopover">
  <ion-content class="padding">
    <div class="row ">
    <div class="col-90 drill-page-title">ROUTE RVENUE - {{regionName}}</div>
    <div class="col-10 popup-close"  ng-click="closesDrillDownPopover()" >X</div>
    </div>

    <ion-list class="row col margin-top-10">
        <div ng-repeat="group in groups track by $index">
          <ion-item class="item-stable main-title drilldown-head"
                    ng-click="toggleGroup(group.id)"
                    ng-class="{active: isGroupShown(group.id)}">
              <i class="icon float-right accord-icon" ng-class="isGroupShown(group.id) ? 'ion-ios-arrow-up' : 'ion-ios-arrow-down'"></i>
            &nbsp;
            PAX Revenue Report - {{group.name}}
          </ion-item>
          <ion-item class="item-accordion drilldown-content"
                    ng-show="isGroupShown(group.id)">
            <div class="row " ng-if="group.items[0]">
              <div class="col-33 search-results">
                Showing {{group.ItemsByPage[currentPage].length}} out of {{group.items[0].length}} results
              </div>
              <div class="col-33 ">
              <span class="ion-android-search search-icon"></span>
                      <input type="text" name="searchText" class="drill-search col col-100" ng-model="searchText"  ng-change="searchResults($index,this)">
                      <div ng-click="searchText = ''" ng-show="searchText" class="search-close"><i class="icon ion-close placeholder-icon"></i></div>
              </div>
              <div class="col-33">
                 <ul class="pagination pagination-sm">
                  <li ng-repeat="n in range(group.ItemsByPage.length)"> <a href="#" ng-click="setPage()" ng-class="{'active': currentPage ==n}" ng-bind="n+1">1</a>

                  </li>
              </ul>

              </div>
              
            </div>

            <div class="row drilldown-head drilldown-title active " ng-if="group.items[0]">
              <div ng-if="(shownGroup == 0)" class="col-25">Country From-To</div>
              <div ng-if="(shownGroup == 1)" class="col-25">Flown Sector</div>
              <div ng-if="(shownGroup == 2)" class="col-25">Flight Number</div>
              <div ng-if="(shownGroup == 2)" class="col-25">Flown Date</div>
              <div ng-if="(shownGroup == 3)" class="col-25">Document Level</div>
              <div class="col-25 text-right">Net Revenue <span class="ion-arrow-up-b" ng-show="!netRevenue" ng-click="netRevenue = !netRevenue;sort('netRevenue',shownGroup,true);"></span><span ng-show="netRevenue" ng-click="netRevenue = !netRevenue;sort('netRevenue',shownGroup,false)" class="ion-arrow-down-b"></span></div>
              <div ng-if="(shownGroup == 0)" class="col-25 text-right">%Contribution <span class="ion-arrow-up-b" ng-show="!contribution" ng-click="contribution = !contribution;sort('contribution',shownGroup,true);"></span><span ng-show="contribution" ng-click="contribution = !contribution;sort('contribution',shownGroup,false)" class="ion-arrow-down-b"></span></div>
              <div class="col-25 text-right">Pax Count</div>
            </div>
            <div class="row drilldown-list" ng-repeat="item in group.ItemsByPage[currentPage]"  ng-click="openDrillDownPopover($event,item,shownGroup)">
              <div ng-if="(shownGroup == 0)" class="col-25">{{item.countryFrom}} - {{item.countryTo}}</div>
              <div ng-if="(shownGroup == 1)" class="col-25">{{item.flownSector}}</div>
              <div ng-if="(shownGroup == 2)" class="col-25">{{item.flightNumber}}</div>
              <div ng-if="(shownGroup == 2)" class="col-25">{{item.flightDate | date : format : timezone}}</div>
              <div ng-if="(shownGroup == 3)" class="col-25">{{item.document}}</div>
              <div class="col-25 text-right padding-right">{{item.netRevenue}}</div>
              <div ng-if="(shownGroup == 0)" class="col-25 text-right padding-right">{{item.contribution}}</div>
              <div class="col-25 text-right padding-right">{{item.paxCount}}</div>
            </div>
            {{item}}
          </ion-item>
        </div>
      </ion-list>


  </ion-content>
</ion-popover-view>